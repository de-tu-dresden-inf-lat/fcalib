<?xml version="1.0" encoding="UTF-8"?>
<project name="fcalib-jars" default="dist" basedir=".">

	<!--
 *
 * Copyright (C) 2013 Julian Mendez
 *
 *
 * This file is part of fcalib ( https://github.com/julianmendez/fcalib ).
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 *
-->

	<property name="project.groupId" value="fcalib" />
	<property name="project.artifactId" value="fcalib-jars" />

	<property name="project.dependency.directory" value="${basedir}/../jars/lib" />
	<property name="maven.repository" value="http://repo.maven.apache.org/maven2" />

	<!-- Cleans the repository of downloaded files. -->
	<target name="clean">
		<delete dir="${project.dependency.directory}" />
	</target>

	<!-- Downloads a specified dependency if it is not already there. -->
	<target name="download" unless="dependency.isavailable">
		<echo message="Downloading dependency: ${dependency.groupId}:${dependency.artifactId}:jar:${dependency.version}" />
		<mkdir dir="${project.dependency.directory}/${dependency.path}" />
		<get src="${maven.repository}/${dependency.path}/${dependency.file}.pom" dest="${project.dependency.directory}/${dependency.path}/${dependency.file}.pom" />
		<get src="${maven.repository}/${dependency.path}/${dependency.file}.jar" dest="${project.dependency.directory}/${dependency.path}/${dependency.file}.jar" />
	</target>

	<!-- Gets the specified dependency. -->
	<target name="getdependency">
		<property name="dependency.path" value="${dependency.groupId}/${dependency.artifactId}/${dependency.version}" />
		<property name="dependency.file" value="${dependency.artifactId}-${dependency.version}" />
		<available filepath="${project.dependency.directory}/${dependency.path}" file="${dependency.file}.jar" property="dependency.isavailable" type="file" />
		<antcall target="download" />
	</target>

	<!-- Gets all the necessary dependencies. -->
	<target name="getdependencies">
		<antcall target="getdependency">
			<param name="dependency.groupId" value="junit" />
			<param name="dependency.artifactId" value="junit" />
			<param name="dependency.version" value="4.10" />
		</antcall>

		<antcall target="getdependency">
			<param name="dependency.groupId" value="log4j" />
			<param name="dependency.artifactId" value="log4j" />
			<param name="dependency.version" value="1.2.16" />
		</antcall>
	</target>

	<!-- Executes all the tasks. -->
	<target name="dist" depends="getdependencies" />

</project>

